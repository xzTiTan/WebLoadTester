# Канон проекта и требования — WebLoadTester

**Версия:** v1.0 02.02.2026

## 1. Краткое резюме (перенос из 00)

WebLoadTester — краткое резюме (актуально)
Версия: v1.1 24.01.2026

1) Назначение
WebLoadTester — кроссплатформенный настольный программный комплекс для автоматизированного тестирования и диагностики веб-приложений. Комплекс предназначен для эксплуатационных задач ИТ-подразделения заказчика: быстро проверить доступность, выявить типовой сбой, локализовать уровень проблемы (сеть / TLS / HTTP / UI), сформировать стандартизированный отчёт и артефакты, а также (опционально) отправить краткий статус в Telegram.

2) Заказчик и контекст применения (для ВКР)
Заказчик: Администрация муниципального образования город Тула.
Подразделение: Управление информатизации и предоставления муниципальных услуг администрации города Тулы, отдел информационных технологий.
Объекты тестирования:
- внутренние веб-ресурсы (доступ только из сети заказчика),
- внешние веб-ресурсы (доступ из интернета; часть поддерживает подрядчик).

3) Целевые роли пользователей (для обоснования актуальности)
Продукт применим разным ролям ИТ-команды:
- Руководитель/менеджер: читает HTML-отчёт и видит итог (что сломано и насколько критично).
- Инженер эксплуатации / DevOps / SRE: использует диагностику DNS/TCP/TLS, монитор доступности, историю прогонов и быстрый повтор запусков.
- QA/автоматизатор: формирует сценарии и проверки, обеспечивает воспроизводимость, сравнивает “до/после”.
- Разработчик: получает доказательства (RunId, детали, логи, скриншоты), ускоряет локализацию причины.

4) Проблематика (в 1 абзаце)
Сейчас проверки выполняются вручную (открыть сайт, попробовать действия, сделать скриншот, иногда ping), результаты и “доказательства” хранятся разрозненно. Это снижает воспроизводимость, усложняет локализацию уровня проблемы (DNS/TCP/TLS/HTTP/UI), затягивает коммуникацию с подрядчиком и не обеспечивает централизованного хранения тестов и истории прогонов.

5) Демонстрационные кейсы (простая реализация, сильная защита)
A) “Не открывается из внутренней сети” — диагностика показывает, на каком уровне сбой (DNS/TCP/TLS/HTTP).
B) “TLS сертификат истёк” — фиксируется причина TLS-ошибки и срок сертификата.
C) “Медленно грузится UI” — измеряются тайминги загрузки, сравниваются метрики.
D) “API отдаёт 500” — HTTP проверки фиксируют 5xx и детали по endpoint’ам.

6) Модульность: 3 семейства, 10 модулей, 4 вкладки UI
Вкладки верхнего уровня: “UI тестирование”, “HTTP тестирование”, “Сеть и безопасность”, “Прогоны”.
Семейство A (UI тестирование): A1 UI-сценарии; A2 UI-снимки; A3 UI-тайминги.
Семейство B (HTTP тестирование): B1 HTTP функциональные проверки; B2 HTTP производительность (контролируемая); B3 HTTP ассеты.
Семейство C (Сеть и безопасность): C1 Сетевая диагностика; C2 Монитор доступности; C3 Базовые проверки безопасности; C4 Предпроверка готовности (preflight).

7) База данных
Используется SQLite (файл) для хранения тестов (исходные данные + процедура + ожидаемый результат), профилей запусков и истории прогонов. Это соответствует требованиям ВКР и не требует серверной инфраструктуры.

8) Отчёты, артефакты, Telegram
- JSON отчёт формируется всегда.
- HTML отчёт формируется опционально (удобен руководителю/заказчику).
- Артефакты: скриншоты, логи и др.
- Telegram: краткий статус прогона; ошибка Telegram не меняет итог прогона.

9) Контролируемость и безопасность (safe defaults)
Нагрузочные параметры имеют безопасные значения по умолчанию и предупреждения в UI при высоких значениях:
- Parallelism: по умолчанию 1–3.
- Duration: 30–60 сек / Iterations: 10–30.
- Таймауты: 15–30 сек на операцию (по модулю).
Цель — исключить случайное создание избыточной нагрузки на продуктивные ресурсы.

10) Технологическая платформа (фиксируем для стабильности)
- .NET 8 (net8.0)
- Avalonia UI 11.x, тема фиксирована Light
- MVVM: CommunityToolkit.Mvvm
- UI автоматизация: Playwright .NET
- HTTP: HttpClient
- Хранение: SQLite
- Отчёты: System.Text.Json

---

## 2. Предметная область и проблематика заказчика (перенос из 01)

Предметная область и проблематика (привязка к заказчику)
Версия: v1.1 24.01.2026

1) Предметная область
Эксплуатация и сопровождение веб-приложений, используемых Администрацией муниципального образования город Тула (ИТ-отдел Управления информатизации и предоставления муниципальных услуг). В эксплуатации есть:
- внутренние веб-ресурсы (доступны только в сети заказчика),
- внешние веб-ресурсы (доступны из интернета; часть поддерживается подрядчиком).

2) Текущее состояние (AS-IS)
Первичная проверка и диагностика выполняются вручную:
- открыть сайт/разделы в браузере,
- выполнить типовые действия,
- сделать скриншот/описание результата,
- иногда выполнить базовую сетевую проверку (например ping), без системного подхода.
Доказательства и результаты хранятся фрагментарно: переписка, заявки, мессенджеры, файлы без единого идентификатора.

3) Проблематика (ключевые “боли”)
3.1 Низкая воспроизводимость
Одинаковый дефект сложно воспроизвести повторно: шаги, параметры и условия запуска не фиксируются строго.

3.2 Сложность локализации уровня проблемы
Симптом “не открывается” может быть вызван различными уровнями:
- DNS (имя не резолвится),
- TCP/порт (порт недоступен/фильтрация),
- TLS (сертификат истёк/ошибка цепочки),
- HTTP (4xx/5xx, редиректы, ошибки API),
- UI (часть страницы не грузится, ассеты не загрузились, элементы не кликаются).

3.3 Нет стандартизированного отчёта и артефактов
Для внутренней диагностики и для подрядчика требуется единый формат: что тестировали, как выполняли, что ожидали, что получили, когда, с какими параметрами. Сейчас это часто собирается вручную.

3.4 Нет централизованного хранения тестов и истории прогонов
Тест — это: исходные данные + процедура + ожидаемый результат. Для регулярных проверок тесты и результаты должны храниться и переиспользоваться.

4) Целевое состояние (TO-BE)
WebLoadTester обеспечивает:
- хранение тестов/версий/профилей/истории прогонов в SQLite,
- RunId для каждого прогона и связку RunId → БД → отчёты → артефакты,
- стандартизированную отчётность (JSON всегда, HTML опционально),
- встроенную диагностику уровня проблемы (DNS/TCP/TLS/HTTP/UI),
- вкладку “Прогоны” для анализа, поиска и повторного запуска.

5) Ожидаемые эффекты (измеримые формулировки для ВКР)
- Снижение времени первичной диагностики инцидента (ускорение локализации уровня проблемы).
- Рост воспроизводимости дефектов (фиксируются шаги/параметры/версия теста).
- Единый пакет доказательств для эскалации подрядчику (RunId + отчёт + артефакты).

---

## 3. Цель, задачи, требования, ограничения и регламент (перенос из 02)

Цель, задачи, требования, ограничения и базовый регламент применения
Версия: v1.1 24.01.2026

1) Цель выпускной квалификационной работы
Разработать программный комплекс для автоматизированного тестирования и диагностики веб-приложений, который устраняет эксплуатационные проблемы заказчика (ИТ-отдел Администрации МО город Тула):
- сокращает трудозатраты на ручные проверки,
- повышает воспроизводимость тестов,
- ускоряет локализацию уровня проблемы (сеть/TLS/HTTP/UI),
- формирует стандартизированные отчёты и артефакты,
- хранит тесты и историю прогонов в базе данных.

2) Задачи
2.1 Выполнить обзор аналогов и подходов к автоматизированному тестированию веб-приложений.
2.2 Сформировать требования к системе (функциональные/нефункциональные), ограничения и регламент применения.
2.3 Спроектировать архитектуру (слои, модули, контракты, жизненный цикл прогона).
2.4 Реализовать UI (Avalonia + MVVM) с 4 вкладками и единым паттерном экранов.
2.5 Реализовать БД SQLite для тестов, профилей, истории прогонов и артефактов.
2.6 Реализовать базовые модули, отчётность и артефакты, Telegram уведомления (опционально).
2.7 Провести испытания на демонстрационных сценариях, сформировать примеры отчётов и оценку результатов.

3) Функциональные требования (минимально необходимое)
3.1 Управление тестами (Test Library)
- создать/редактировать тест в UI,
- сохранить/загрузить тест из БД,
- тест версионируется: каждое сохранение создаёт новую версию.

3.2 Профили запусков (RunProfile)
- выбрать профиль запуска (шаблон),
- сохранить профиль как шаблон для повторного применения,
- при запуске фиксировать snapshot фактически использованных параметров.

3.3 Выполнение прогонов
- запуск/останов/отмена,
- параллельность (workers),
- единый лог выполнения,
- стадийность: Preflight (опционально) → Running → Saving/Reporting → Done.

3.4 Результаты и отчётность
- JSON отчёт формируется всегда,
- HTML отчёт опционально,
- артефакты (скриншоты, логи и т.д.) привязаны к RunId,
- вкладка “Прогоны”: поиск, фильтры, просмотр деталей, повторный запуск.

4) Нефункциональные требования
- кроссплатформенность (Windows/Linux),
- понятный UI (для эксплуатации),
- корректная работа при изменении размера окна (без наложений, с прокруткой),
- воспроизводимость результатов (версия теста + snapshot профиля + RunId).

5) Ограничения и базовый регламент
5.1 Законность: тестирование только ресурсов заказчика либо ресурсов, на тестирование которых есть разрешение.
5.2 Безопасность: продукт не реализует атакующие функции; security-проверки — baseline/конфигурационные.
5.3 Контролируемая нагрузка: safe defaults + предупреждения при высоких параметрах.
Рекомендуемые safe defaults:
- Parallelism: 1–3.
- Duration: 30–60 секунд; Iterations: 10–30.
- Таймауты: 15–30 секунд на операцию (по модулю).
Порог предупреждения в UI (пример): Parallelism > 10 или Duration > 5 минут.

6) Критерии приёмки (коротко, “железно”)
- Каждый запуск создаёт RunId и запись TestRun в БД.
- report.json создаётся всегда (даже если есть ошибки; в отчёте фиксируются причины).
- Артефакты (скриншоты/лог) при их наличии сохраняются в runs/{RunId}/ и отображаются в UI.
- Ошибка Telegram не влияет на итог прогона (фиксируется отдельно).

---

## 4. Рекомендации по стеку и правила архитектуры (перенос из 08)

Рекомендации по стеку и правила архитектуры (фиксируем для стабильности ВКР)
Версия: v1.1 24.01.2026

1) Целевая платформа
Целевой фреймворк: .NET 8 (net8.0).
Причины: стабильность, совместимость с Avalonia 11, сниженные риски несовместимости и “preview-эффектов”.

2) UI и MVVM
- Avalonia UI 11.x
- Тема фиксирована Light
- MVVM: CommunityToolkit.Mvvm

3) Модульные технологии
- UI тестирование: Playwright .NET
- HTTP тестирование: HttpClient
- Хранение: SQLite (файл)
- Отчёты: System.Text.Json
- Интеграция Telegram: HTTP API + клиентская обёртка (ошибка не влияет на итог прогона)

4) Рекомендуемые NuGet пакеты (без фиксации версий в тексте ВКР)
- Avalonia
- CommunityToolkit.Mvvm
- Microsoft.Playwright
- Microsoft.Data.Sqlite (или аналогичный провайдер)
- System.Text.Json (встроен)
(В пояснительной записке версии указывать по факту на момент сдачи, при необходимости.)

5) Архитектурные правила (обязательные для чистоты проекта)
- UI не содержит бизнес-логики модулей.
- Core управляет жизненным циклом прогона и общими стадиями.
- Модуль реализует Validate + ExecuteAsync и возвращает ModuleResult (summary/details/artifacts).
- Storage отвечает за SQLite и хранение сущностей/снимков профилей.
- Reporting отвечает за формирование report.json (всегда) и report.html (опционально).
- Telegram — надстройка: ошибка интеграции не меняет статус прогона.

6) Нота для ВКР
В тексте ВКР не упоминать использование ИИ как инструмента разработки. Описывать разработку как выполненную вручную стандартными средствами.

---

## 5. “Источник истины” и правила консистентности (добавлено)

### 5.1 Что считаем неизменяемым базисом
- **10 модулей / 3 семейства / 4 вкладки UI** — базовая декомпозиция системы.
- **SQLite + runs/** — минимальная инфраструктура хранения.
- **JSON отчёт формируется всегда**; HTML отчёт и Telegram — опциональны и не влияют на итог статуса прогона.

### 5.2 Как избегаем повторов в тексте ВКР
- В ВКР: *одна* формулировка цели/задач/ограничений — берём из этого файла.
- В остальных файлах: вместо повторения — ссылка на раздел/подразделение (например: “см. Канон, §3.3”).

### 5.3 Где фиксируем изменения
- Любое изменение требований/терминов сначала правим здесь, затем — UI/код/матрицу трассируемости.
