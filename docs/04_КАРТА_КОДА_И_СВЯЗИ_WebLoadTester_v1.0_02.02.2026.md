# Карта кода и связи (заполняемый якорь) — WebLoadTester

**Версия:** v1.0 02.02.2026

## 1. Как пользоваться этим файлом
Здесь фиксируются **привязки “документ → код”**. Когда Codex меняет код, ты обновляешь соответствующие строки здесь (или просишь меня сделать это по diff/коммиту).

---

## 2. Слои/папки/пространства имён (заполнить по репозиторию)

| Слой | Назначение | Папка/namespace в репо | Ключевые типы (классы/интерфейсы) |
|---|---|---|---|
| Presentation (UI) | Avalonia экраны, ViewModels |  |  |
| Core | Оркестрация прогона, жизненный цикл |  |  |
| Modules | Реализация 10 модулей A1..C4 |  |  |
| Storage | SQLite, репозитории, миграции |  |  |
| Reporting | JSON/HTML отчёт, сериализация |  |  |
| Integrations | Telegram (опционально), внешние адаптеры |  |  |

---

## 3. Ключевые доменные сущности (канонические имена)
> Эти термины должны совпадать с тем, что в БД/отчёте/тексте ВКР.

- **TestCase** — тест (карточка/метаданные).
- **TestCaseVersion** — версия теста (PayloadJson + ChangeNote).
- **RunProfile** — профиль запуска (шаблон параметров).
- **TestRun** — прогон (RunId, статус, SummaryJson).
- **RunItem** — детализация событий/шагов/endpoint’ов.
- **Artifact** — артефакт (report.json, report.html, скриншоты, логи).
- **ModuleType** — идентификатор модуля (A1..C4).

---

## 4. Реестр модулей → код (заполнить)

| Модуль | Назначение | VM (UI) | Сервис/Runner (Core/Modules) | DTO/Settings (PayloadJson) |
|---|---|---|---|---|
| A1 UI-сценарии |  |  |  |  |
| A2 UI-снимки |  |  |  |  |
| A3 UI-тайминги |  |  |  |  |
| B1 HTTP функциональные |  |  |  |  |
| B2 HTTP производительность |  |  |  |  |
| B3 HTTP ассеты |  |  |  |  |
| C1 Сетевая диагностика |  |  |  |  |
| C2 Монитор доступности |  |  |  |  |
| C3 Базовые проверки безопасности |  |  |  |  |
| C4 Предпроверка готовности |  |  |  |  |

---

## 5. Поток выполнения прогона (для трассируемости)
1) Пользователь выбирает модуль → тест → профиль запуска.  
2) Нажимает **Запуск** → Core создаёт RunId и фиксирует snapshot версии теста + профиля.  
3) (Опционально) выполняется **Preflight (C4)**.  
4) Выполняется модуль → накапливаются RunItems/Artifacts.  
5) Reporting пишет `report.json` (+ `report.html` по флагу).  
6) Storage сохраняет ссылки на артефакты.  
7) (Опционально) Telegram отправляет статус.

---

## 6. TODO (что в первую очередь заполнить)
- Namespaces/папки по слоям.
- Таблицу “Реестр модулей → код”.
- Где создаётся RunId и где формируется SummaryJson.
