# WebLoadTester

**Версия документации:** v3.39 23.02.2026

## Что это
WebLoadTester — кроссплатформенное настольное приложение на .NET 8 + Avalonia для эксплуатационной диагностики и тестов UI/HTTP/сети. Оно запускает модульные проверки, собирает метрики, сохраняет артефакты и формирует отчёты по каждому прогону с уникальным `RunId`.

Результаты каждого запуска фиксируются в структуре `runs/{RunId}/`: JSON-отчёт сохраняется всегда, HTML — только при включённой настройке профиля. Скриншоты и логи складываются рядом с отчётами, что позволяет воспроизводить результаты и проверять регрессии.

WebLoadTester ориентирован на легитимные сценарии тестирования с безопасными значениями по умолчанию, без агрессивных режимов нагрузки. Инварианты и ограничения закреплены в якорных документах (см. ниже).

## Ключевые инварианты
- 10 модулей, 3 семейства, 4 вкладки верхнего уровня: «UI тестирование», «HTTP тестирование», «Сеть и безопасность», «Прогоны».
- SQLite как хранилище данных + файловая структура `runs/` для артефактов.
- Отчёты: JSON всегда, HTML — опционально.
- Telegram уведомления опциональны; ошибка Telegram не влияет на итог статуса прогона.
- Управляемая нагрузка: только режим Iterations/Duration с безопасными значениями и предупреждениями; stress/soak — только в перспективах.

## Документация (единый канон)
- [AGENTS.md](AGENTS.md) — правила для код-агентов и границы изменений.
- [docs/INDEX.md](docs/INDEX.md) — мастер-документ проекта (единый источник правды внутри репозитория).
- [docs/CODEX_RULES_AND_CHANGELOG.md](docs/CODEX_RULES_AND_CHANGELOG.md) — правила работы и журнал изменений.

## Быстрый старт
```bash
dotnet restore
dotnet build
dotnet run
```

**Playwright-браузеры:**
- Приложение ожидает браузеры рядом с бинарником (`AppContext.BaseDirectory/browsers`).
- Установка после `dotnet build`:
  - **Windows (PowerShell):**
    ```powershell
    $env:PLAYWRIGHT_BROWSERS_PATH = (Join-Path (Get-Location) "bin/Debug/net8.0/browsers")
    .\bin\Debug\net8.0\playwright.ps1 install
    ```
  - **Linux/macOS (bash):**
    ```bash
    PLAYWRIGHT_BROWSERS_PATH=bin/Debug/net8.0/browsers \
      ./bin/Debug/net8.0/playwright.sh install
    ```
  > Для Release/publish замените путь на соответствующий каталог сборки.

## Краткий список модулей (A1–C4)
Полные детали — в [docs/02 (раздел «Модули»)](docs/02_ARCHITECTURE_AND_DATA.md).

- **A1 ui.scenario** — сценарные UI шаги с измерениями и скриншотами.
- **A2 ui.snapshot** — массовые скриншоты URL.
- **A3 ui.timing** — замеры времени загрузки страниц.
- **B1 http.functional** — функциональные HTTP проверки с ассерциями.
- **B2 http.performance** — управляемая HTTP нагрузка (итерации/длительность).
- **B3 http.assets** — проверки статических ассетов.
- **C1 net.diagnostics** — DNS/TCP/TLS диагностика.
- **C2 net.availability** — проверка доступности по интервалу.
- **C3 net.security** — базовые security-проверки.
- **C4 net.preflight** — быстрый preflight DNS/TCP/TLS/HTTP.

## Где лежат результаты
- `runs/{RunId}/report.json` — всегда.
- `runs/{RunId}/report.html` — если включено в профиле.
- `runs/{RunId}/screenshots/` — скриншоты.
- `runs/{RunId}/logs/` — логи, включая `run.log`.

## Ограничения и законность
Инструмент предназначен только для легитимных проверок на системах, которыми вы владеете или на которые получили явное разрешение. Атакующие функции и сценарии не допускаются.
