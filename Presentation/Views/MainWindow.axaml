<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:WebLoadTester.Presentation.ViewModels.Shell"
        xmlns:workspace="clr-namespace:WebLoadTester.Presentation.Views.Workspace"
        x:Class="WebLoadTester.Presentation.Views.MainWindow"
        x:DataType="vm:AppShellViewModel"
        x:Name="RootWindow"
        Title="WebLoadTester"
        Width="1280"
        Height="860"
        MinWidth="1080"
        MinHeight="760">
    <Window.KeyBindings>
        <KeyBinding Gesture="F5" Command="{Binding StartHotkeyCommand}" />
        <KeyBinding Gesture="Shift+F5" Command="{Binding StopHotkeyCommand}" />
        <KeyBinding Gesture="Ctrl+L" Command="{Binding ToggleLogDrawerCommand}" />
    </Window.KeyBindings>
    <Grid RowDefinitions="Auto,*,Auto" RowSpacing="8" Margin="12">
        <Border Grid.Row="0" Padding="8">
            <Grid ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="8">
                <TextBlock Text="WebLoadTester" VerticalAlignment="Center" />
                <TextBlock Grid.Column="1"
                           Text="{Binding StatusText}"
                           VerticalAlignment="Center" />
                <Button Grid.Column="2" Content="Настройки" Command="{Binding OpenSettingsCommand}" />
                <Button Grid.Column="3" Content="Папка прогонов" Command="{Binding OpenRunsFolderCommand}" />
            </Grid>
        </Border>

        <Grid Grid.Row="1" RowDefinitions="Auto,*" RowSpacing="8">
            <TabControl Grid.Row="0"
                        ItemsSource="{Binding Tabs}"
                        SelectedItem="{Binding SelectedTab, Mode=TwoWay}"
                        IsEnabled="{Binding DataContext.IsIdle, ElementName=RootWindow}">
                <TabControl.ItemTemplate>
                    <DataTemplate x:DataType="vm:TabViewModel">
                        <TextBlock Text="{Binding Title}" />
                    </DataTemplate>
                </TabControl.ItemTemplate>
            </TabControl>

            <Border Grid.Row="1" Padding="4">
                <ContentControl Content="{Binding SelectedTab.ContentVm}" />
            </Border>
        </Grid>

        <workspace:LogDrawerView Grid.Row="2" DataContext="{Binding LogDrawer}" />
    </Grid>
</Window>
