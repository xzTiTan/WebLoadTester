<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:WebLoadTester.Presentation.ViewModels.Shell"
        xmlns:workspace="clr-namespace:WebLoadTester.Presentation.Views.Workspace"
        x:Class="WebLoadTester.Presentation.Views.MainWindow"
        x:DataType="vm:AppShellViewModel"
        x:Name="RootWindow"
        Title="WebLoadTester"
        Width="1280"
        Height="860"
        MinWidth="1080"
        MinHeight="760">
    <Window.KeyBindings>
        <KeyBinding Gesture="F5" Command="{Binding StartHotkeyCommand}" />
        <KeyBinding Gesture="Shift+F5" Command="{Binding StopHotkeyCommand}" />
        <KeyBinding Gesture="Ctrl+L" Command="{Binding ToggleLogDrawerCommand}" />
    </Window.KeyBindings>
    <Grid RowDefinitions="Auto,Auto,*,Auto" RowSpacing="6" Margin="8">
        <Border Grid.Row="0" Padding="4">
            <Grid ColumnDefinitions="*,Auto,Auto,Auto" ColumnSpacing="6">
                <TextBlock Text="WebLoadTester" VerticalAlignment="Center" />
                <TextBlock Grid.Column="1"
                           Text="{Binding StatusText}"
                           VerticalAlignment="Center" />
                <Button Grid.Column="2" Padding="10,4" Content="Настройки" Command="{Binding OpenSettingsCommand}" />
                <Button Grid.Column="3" Padding="10,4" Content="Папка прогонов" Command="{Binding OpenRunsFolderCommand}" />
            </Grid>
        </Border>

        <TabControl Grid.Row="1"
                    Margin="0"
                    ZIndex="10"
                    ItemsSource="{Binding Tabs}"
                    SelectedIndex="{Binding SelectedTabIndex, Mode=TwoWay}">
            <TabControl.ItemTemplate>
                <DataTemplate x:DataType="vm:TabViewModel">
                    <TextBlock Text="{Binding Title}" ToolTip.Tip="{Binding FullTitle}" />
                </DataTemplate>
            </TabControl.ItemTemplate>
        </TabControl>

        <Border Grid.Row="2"
                Padding="4"
                ZIndex="0"
                ClipToBounds="True"
                IsHitTestVisible="True">
            <ContentControl Content="{Binding SelectedTab.ContentVm}" />
        </Border>

        <workspace:LogDrawerView Grid.Row="3" DataContext="{Binding LogDrawer}" />
    </Grid>
</Window>
