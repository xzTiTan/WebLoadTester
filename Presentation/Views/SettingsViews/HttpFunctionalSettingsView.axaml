<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:WebLoadTester.Presentation.ViewModels.SettingsViewModels"
             xmlns:rows="clr-namespace:WebLoadTester.Presentation.ViewModels.SettingsViewModels.HttpFunctional"
             xmlns:commonRows="clr-namespace:WebLoadTester.Presentation.ViewModels.SettingsViewModels.HttpCommon"
             xmlns:controls="clr-namespace:WebLoadTester.Presentation.Views.Controls"
             x:Class="WebLoadTester.Presentation.Views.SettingsViews.HttpFunctionalSettingsView"
             x:DataType="vm:HttpFunctionalSettingsViewModel">
    <UserControl.DataTemplates>
        <DataTemplate x:DataType="rows:HttpFunctionalEndpointRowViewModel">
            <StackPanel Spacing="4" Margin="0,0,0,8">
                <Grid ColumnDefinitions="140,3*,96" ColumnSpacing="8">
                    <ComboBox Grid.Column="0" ItemsSource="{Binding Methods}" SelectedItem="{Binding Method, Mode=TwoWay}" />
                    <TextBox Grid.Column="1" Text="{Binding Url, Mode=TwoWay}" Watermark="/api/endpoint" />
                    <NumericUpDown Grid.Column="2" Minimum="100" Maximum="599" Value="{Binding ExpectedStatus, Mode=TwoWay}" />
                </Grid>
                <TextBlock Text="{Binding RowErrorText}" IsVisible="{Binding HasRowError}" />
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:DataType="commonRows:HttpHeaderRowViewModel">
            <StackPanel Spacing="4" Margin="0,0,0,8">
                <Grid ColumnDefinitions="220,4*" ColumnSpacing="8">
                    <TextBox Grid.Column="0" Text="{Binding Key, Mode=TwoWay}" Watermark="Header" />
                    <TextBox Grid.Column="1" Text="{Binding Value, Mode=TwoWay}" Watermark="Value" />
                </Grid>
                <TextBlock Text="{Binding RowErrorText}" IsVisible="{Binding HasRowError}" />
            </StackPanel>
        </DataTemplate>
    </UserControl.DataTemplates>

    <StackPanel Spacing="16">
        <Border Classes="section">
            <StackPanel Spacing="8">
                <TextBlock Text="Базовые настройки" Classes="section-title" />
                <Grid ColumnDefinitions="{StaticResource FieldRowColumns}" Classes="field-row">
                    <TextBlock Text="Base URL" Classes="field-label" />
                    <TextBox Classes="field-control" Text="{Binding BaseUrl, Mode=TwoWay}" />
                </Grid>
                <Grid ColumnDefinitions="{StaticResource FieldRowColumns}" Classes="field-row">
                    <TextBlock Text="Таймаут (сек)" Classes="field-label" />
                    <NumericUpDown Classes="field-control" Minimum="1" Value="{Binding TimeoutSeconds, Mode=TwoWay}" />
                </Grid>
            </StackPanel>
        </Border>

        <Border Classes="section">
            <StackPanel Spacing="8">
                <TextBlock Text="Endpoints" Classes="section-title" />
                <controls:RowListEditorView DataContext="{Binding EndpointsEditor}" />
            </StackPanel>
        </Border>

        <Border Classes="section">
            <StackPanel Spacing="8">
                <TextBlock Text="Headers (общие)" Classes="section-title" />
                <controls:RowListEditorView DataContext="{Binding HeadersEditor}" />
            </StackPanel>
        </Border>
    </StackPanel>
</UserControl>
